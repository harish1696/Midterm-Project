\hypertarget{classdetectQRcode}{}\section{detect\+Q\+Rcode Class Reference}
\label{classdetectQRcode}\index{detect\+Q\+Rcode@{detect\+Q\+Rcode}}


{\ttfamily \#include $<$detect\+Q\+Rcode.\+hpp$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classdetectQRcode_a5ff24c2afb32b62855512e9d6e7342e1}{detect\+Q\+Rcode} ()
\begin{DoxyCompactList}\small\item\em Constructs a object. \end{DoxyCompactList}\item 
\hyperlink{classdetectQRcode_a9e5df0cf2a68be681452cb87ee780334}{$\sim$detect\+Q\+Rcode} ()
\begin{DoxyCompactList}\small\item\em Destroys a object. \end{DoxyCompactList}\item 
bool \hyperlink{classdetectQRcode_afbac1fead0246a27d3e143bb0f1223f0}{find} (Mat \&img)
\begin{DoxyCompactList}\small\item\em detects the presence of Q\+Rcode in the given image \end{DoxyCompactList}\item 
void \hyperlink{classdetectQRcode_af429ccf110e1250e38e2a9fa249ce459}{draw\+Boundary} (Mat \&img)
\begin{DoxyCompactList}\small\item\em draws boundary around detected Q\+Rcode \end{DoxyCompactList}\item 
bool \hyperlink{classdetectQRcode_a07eb3b6401b656d0d25f3ddbaec791bc}{extract\+Q\+Rcode} (Mat \&img)
\begin{DoxyCompactList}\small\item\em extract Q\+Rcode from the entire image \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
vector$<$ Point2f $>$ \hyperlink{classdetectQRcode_afe6facdb30c910a01e4f607d108a5db5}{centers}
\item 
vector$<$ float $>$ \hyperlink{classdetectQRcode_a5f57e433cf4135aa0bf236dee35ff044}{module\+Size}
\end{DoxyCompactItemize}


\subsection{Constructor \& Destructor Documentation}
\index{detect\+Q\+Rcode@{detect\+Q\+Rcode}!detect\+Q\+Rcode@{detect\+Q\+Rcode}}
\index{detect\+Q\+Rcode@{detect\+Q\+Rcode}!detect\+Q\+Rcode@{detect\+Q\+Rcode}}
\subsubsection[{\texorpdfstring{detect\+Q\+Rcode()}{detectQRcode()}}]{\setlength{\rightskip}{0pt plus 5cm}detect\+Q\+Rcode\+::detect\+Q\+Rcode (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classdetectQRcode_a5ff24c2afb32b62855512e9d6e7342e1}{}\label{classdetectQRcode_a5ff24c2afb32b62855512e9d6e7342e1}


Constructs a object. 


\begin{DoxyCode}
34 \{\}
\end{DoxyCode}
\index{detect\+Q\+Rcode@{detect\+Q\+Rcode}!````~detect\+Q\+Rcode@{$\sim$detect\+Q\+Rcode}}
\index{````~detect\+Q\+Rcode@{$\sim$detect\+Q\+Rcode}!detect\+Q\+Rcode@{detect\+Q\+Rcode}}
\subsubsection[{\texorpdfstring{$\sim$detect\+Q\+Rcode()}{~detectQRcode()}}]{\setlength{\rightskip}{0pt plus 5cm}detect\+Q\+Rcode\+::$\sim$detect\+Q\+Rcode (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classdetectQRcode_a9e5df0cf2a68be681452cb87ee780334}{}\label{classdetectQRcode_a9e5df0cf2a68be681452cb87ee780334}


Destroys a object. 


\begin{DoxyCode}
39 \{\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{detect\+Q\+Rcode@{detect\+Q\+Rcode}!draw\+Boundary@{draw\+Boundary}}
\index{draw\+Boundary@{draw\+Boundary}!detect\+Q\+Rcode@{detect\+Q\+Rcode}}
\subsubsection[{\texorpdfstring{draw\+Boundary(\+Mat \&img)}{drawBoundary(Mat &img)}}]{\setlength{\rightskip}{0pt plus 5cm}void detect\+Q\+Rcode\+::draw\+Boundary (
\begin{DoxyParamCaption}
\item[{Mat \&}]{img}
\end{DoxyParamCaption}
)}\hypertarget{classdetectQRcode_af429ccf110e1250e38e2a9fa249ce459}{}\label{classdetectQRcode_af429ccf110e1250e38e2a9fa249ce459}


draws boundary around detected Q\+Rcode 


\begin{DoxyParams}{Parameters}
{\em img} & input image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none 
\end{DoxyReturn}

\begin{DoxyCode}
113                                           \{
114   \textcolor{comment}{// order the centers}
115   sortCenters();
116   \textcolor{comment}{// find top left and bootom right corners}
117   findCorners();
118   \textcolor{comment}{// draw boundary around QRcode}
119   cv::rectangle(img, corners[0], corners[1], CV\_RGB(255, 0, 0), 1, 8, 0);
120 \}
\end{DoxyCode}
\index{detect\+Q\+Rcode@{detect\+Q\+Rcode}!extract\+Q\+Rcode@{extract\+Q\+Rcode}}
\index{extract\+Q\+Rcode@{extract\+Q\+Rcode}!detect\+Q\+Rcode@{detect\+Q\+Rcode}}
\subsubsection[{\texorpdfstring{extract\+Q\+Rcode(\+Mat \&img)}{extractQRcode(Mat &img)}}]{\setlength{\rightskip}{0pt plus 5cm}bool detect\+Q\+Rcode\+::extract\+Q\+Rcode (
\begin{DoxyParamCaption}
\item[{Mat \&}]{img}
\end{DoxyParamCaption}
)}\hypertarget{classdetectQRcode_a07eb3b6401b656d0d25f3ddbaec791bc}{}\label{classdetectQRcode_a07eb3b6401b656d0d25f3ddbaec791bc}


extract Q\+Rcode from the entire image 


\begin{DoxyParams}{Parameters}
{\em img} & imput image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
false if detection is invalid 
\end{DoxyReturn}

\begin{DoxyCode}
182                                            \{
183   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}& i : \hyperlink{classdetectQRcode_afe6facdb30c910a01e4f607d108a5db5}{centers}) \{
184       \textcolor{keywordflow}{if} (i.x > img.cols || i.x < 1 || i.y > img.rows || i.y < 1)
185        \textcolor{keywordflow}{return} \textcolor{keyword}{false};
186   \}
187   cv::Point2f pt(centers[1].x, centers[2].y);
188   centers.push\_back(pt);
189   \textcolor{comment}{// Version 1 QRcode}
190   \textcolor{keywordtype}{int} dimension = 21;
191   vector<Point2f> src;
192   src.push\_back(cv::Point2f(70, 70));
193   src.push\_back(cv::Point2f((dimension - 3.5f)*20, 70));
194   src.push\_back(cv::Point2f(70, (dimension - 3.5f)*20));
195   src.push\_back(cv::Point2f((dimension - 3.5f)*20, (dimension - 3.5f)*20));
196 
197   \textcolor{comment}{// extracting just the QRcode from the entire image}
198   Mat transform = cv::getPerspectiveTransform(centers, src);
199   cv::warpPerspective(img, img, transform,
200                   Size(dimension*20, dimension*20), INTER\_AREA);
201   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
202 \}
\end{DoxyCode}
\index{detect\+Q\+Rcode@{detect\+Q\+Rcode}!find@{find}}
\index{find@{find}!detect\+Q\+Rcode@{detect\+Q\+Rcode}}
\subsubsection[{\texorpdfstring{find(\+Mat \&img)}{find(Mat &img)}}]{\setlength{\rightskip}{0pt plus 5cm}bool detect\+Q\+Rcode\+::find (
\begin{DoxyParamCaption}
\item[{Mat \&}]{img}
\end{DoxyParamCaption}
)}\hypertarget{classdetectQRcode_afbac1fead0246a27d3e143bb0f1223f0}{}\label{classdetectQRcode_afbac1fead0246a27d3e143bb0f1223f0}


detects the presence of Q\+Rcode in the given image 


\begin{DoxyParams}{Parameters}
{\em img} & input image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if Qrcode present or false if not present 
\end{DoxyReturn}

\begin{DoxyCode}
46                                   \{
47   \textcolor{comment}{// clear the previous data each time an image is scanned for QRcode}
48   \hyperlink{classdetectQRcode_afe6facdb30c910a01e4f607d108a5db5}{centers}.clear();
49   \hyperlink{classdetectQRcode_a5f57e433cf4135aa0bf236dee35ff044}{moduleSize}.clear();
50   \textcolor{comment}{// 3 rows can be skipped each time the image is scanned for QRcode}
51   \textcolor{keywordtype}{int} skipRows = 3;
52   \textcolor{comment}{// each state represents W->B, B->W transitions}
53   vector<int> stateCount(5, 0);
54   \textcolor{comment}{// scan the image for finder patterns in Qrcode}
55   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} row = 0; row < img.rows; row += skipRows) \{
56     stateCount = \{0, 0, 0, 0, 0\};
57     \textcolor{keywordtype}{int} currentState = 0;
58     \textcolor{comment}{// ptr points to a row of the image}
59     \textcolor{keyword}{const} uchar* ptr = img.ptr<uchar>(row);
60     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} col = 0; col < img.cols; col++) \{
61        \textcolor{comment}{// check if it is black pixel}
62        \textcolor{keywordflow}{if} (ptr[col] < 128) \{
63          \textcolor{comment}{// if currentState points to white cell change it to black}
64          \textcolor{keywordflow}{if} (currentState == 1 || currentState == 3) \{
65             \textcolor{comment}{// W->B transition}
66             currentState++;
67           \}
68          \textcolor{comment}{// count the number of colums with black pixel}
69          stateCount[currentState]++;
70        \} \textcolor{keywordflow}{else} \{
71           \textcolor{comment}{// check if currentState points to white cell}
72           \textcolor{keywordflow}{if} ((currentState & 0x1) == 1) \{
73              \textcolor{comment}{// count the number of colums with white pixel}
74              stateCount[currentState]++;
75           \} \textcolor{keywordflow}{else} \{
76              \textcolor{keywordflow}{if} (currentState == 4) \{
77               \textcolor{comment}{// check if it follows the 1:1:3:1:1 ratio}
78               \textcolor{keywordflow}{if} (checkRatio(stateCount)) \{
79                 \textcolor{comment}{// check if it is a possible center}
80                 isCenter(img, stateCount, row, col);
81               \} \textcolor{keywordflow}{else} \{
82                 currentState = 3;
83                 stateCount[0] = stateCount[2];
84                 stateCount[1] = stateCount[3];
85                 stateCount[2] = stateCount[4];
86                 stateCount[3] = 1;
87                 stateCount[4] = 0;
88                 \textcolor{keywordflow}{continue};
89               \}
90               stateCount = \{0, 0, 0, 0, 0\};
91               currentState = 0;
92             \} \textcolor{keywordflow}{else} \{
93               \textcolor{comment}{// B->W transition}
94               currentState++;
95               stateCount[currentState]++;
96             \}
97           \}
98        \}
99     \}
100   \}
101   \textcolor{keywordflow}{if} (\hyperlink{classdetectQRcode_afe6facdb30c910a01e4f607d108a5db5}{centers}.size() != 3) \{
102   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
103   \} \textcolor{keywordflow}{else} \{
104     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
105   \}
106 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{detect\+Q\+Rcode@{detect\+Q\+Rcode}!centers@{centers}}
\index{centers@{centers}!detect\+Q\+Rcode@{detect\+Q\+Rcode}}
\subsubsection[{\texorpdfstring{centers}{centers}}]{\setlength{\rightskip}{0pt plus 5cm}vector$<$Point2f$>$ detect\+Q\+Rcode\+::centers}\hypertarget{classdetectQRcode_afe6facdb30c910a01e4f607d108a5db5}{}\label{classdetectQRcode_afe6facdb30c910a01e4f607d108a5db5}
\index{detect\+Q\+Rcode@{detect\+Q\+Rcode}!module\+Size@{module\+Size}}
\index{module\+Size@{module\+Size}!detect\+Q\+Rcode@{detect\+Q\+Rcode}}
\subsubsection[{\texorpdfstring{module\+Size}{moduleSize}}]{\setlength{\rightskip}{0pt plus 5cm}vector$<$float$>$ detect\+Q\+Rcode\+::module\+Size}\hypertarget{classdetectQRcode_a5f57e433cf4135aa0bf236dee35ff044}{}\label{classdetectQRcode_a5f57e433cf4135aa0bf236dee35ff044}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/\hyperlink{detectQRcode_8hpp}{detect\+Q\+Rcode.\+hpp}\item 
app/\hyperlink{detectQRcode_8cpp}{detect\+Q\+Rcode.\+cpp}\end{DoxyCompactItemize}
